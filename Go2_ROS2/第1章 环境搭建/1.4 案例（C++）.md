创建包：
```
mkdir -p unitree_go2_ws/src
cd unitree_go2_ws/
code .
```
scr下创建文件夹：base  helloworld  tutorial

终端：
```
ros2 topic list | grep -i request
ros2 topic info /api/sport/request
ros2 interface show unitree_api/msg/Request
```

生成包：
`ros2 pkg create helloworld --build-type ament_cmake --dependencies rclcpp unitree_api --node-name hello`

hello.cpp改为ros2_node模板
```
#include "rclcpp/rclcpp.hpp"

// 可以包含其他消息头文件，例如：
// #include "std_msgs/msg/string.hpp"

class MyNode : public rclcpp::Node
{
public:
    MyNode() : Node("my_node_name")
    {
        // 构造函数：初始化发布者、订阅者、服务等
        RCLCPP_INFO(this->get_logger(), "Hello from my ROS 2 node!");
    }

private:
    // 成员变量（如发布者、订阅者）声明
};

int main(int argc, char ** argv)
{
    // 初始化 ROS 2
    rclcpp::init(argc, argv);
    // 创建节点并开始自旋（处理回调）
    auto node = std::make_shared<MyNode>();
    rclcpp::spin(node);
    // 关闭 ROS 2
    rclcpp::shutdown();
    return 0;
}
```



初步编写
```
/*

打招呼

流程：
1.创建发布对象
2.创建定时器
3.定时器中调用发布对象发布指令

*/

#include "rclcpp/rclcpp.hpp"
#include "unitree_api/msg/request.hpp"

using namespace std::chrono_literals;  

class HelloWorld : public rclcpp::Node
{
public:
HelloWorld() : Node("helloworld")
{
// 构造函数：初始化发布者、订阅者、服务等
RCLCPP_INFO(this->get_logger(), "Hello from my ROS 2 node!");
// 1.创建发布对象
pub_ = this->create_publisher<unitree_api::msg::Request>("/api/sport/request",10);
// 2.创建定时器
timer_ = this->create_wall_timer(1s,std::bind(&HelloWorld::on_timer,this));

// 3.定时器中调用发布对象发布指令
}

private:
// 成员变量（如发布者、订阅者）声明
rclcpp::Publisher<unitree_api::msg::Request>::SharedPtr pub_;
rclcpp::TimerBase::SharedPtr timer_;
void on_timer(){    

}
}; 

int main(int argc, char ** argv)
{
// 初始化 ROS 2
rclcpp::init(argc, argv);
// 创建节点并开始自旋（处理回调）
auto node = std::make_shared<HelloWorld>();
rclcpp::spin(node);
// 关闭 ROS 2
rclcpp::shutdown();
return 0;

}
```
配置路径：
${workspaceFolder}/**
/opt/ros/humble/include/**
~/unitree_ros2/cyclonedds_ws/install/unitree_api/include/**


编译运行：
rm -rf build install log #完全清除
colcon build --packages-select helloworld
. install/setup.bash 
ros2 run helloworld hello

补充void
```
void on_timer(){

// 3.定时器中调用发布对象发布指令

unitree_api::msg::Request request;

request.header.identity.api_id = 1016;//打招呼协议

pub_->publish(request);

}
```
每次改完代码记得保存再编译。