1. 在 ~/unitree_go2_ws/src/base 下，创建：ros2 pkg create go2_description

2. 下载go2_urdf文件： https://support.unitree.com/home/zh/developer/Obtain%20SDK
将其中的 dae,meshes,urdf 复制到 ~/unitree_go2_ws/src/base/go2_description
并同级创建 launch 文件夹，里边创建 display.launch.py 用于演示

3. 在.xml文件中添加依赖：
```
<exec_depend>rviz2</exec_depend>

<exec_depend>ros2launch</exec_depend>

<exec_depend>xacro</exec_depend>

<exec_depend>joint_state_publisher</exec_depend>

<exec_depend>robot_state_publisher</exec_depend>
```
在CMakeLists.txt 中进行安装操作，(在if(BUILD_TESTING)上一行)添加：
```
install(

DIRECTORY launch dae urdf meshes

DESTINATION share/${PROJECT_NAME}

)
```

4. 测试一下：
(要在~/unitree_go2_ws下)
colcon build --packages-select go2_description
. install/setup.bash
ros2 launch go2_description display.launch.py

```
# 方法1：完全重新构建（推荐）
rm -rf build install log
colcon build --packages-select go2_description

# 或者方法2：只清理指定包
colcon build --packages-select go2_description --cmake-clean-first
```


5. 编辑 display.launch.py
```
from launch import LaunchDescription

from launch_ros.actions import Node

# # 封装终端指令相关类......

# from launch.actions import ExecuteProcess

# from launch.substitutions import FindExecutable

# # 参数声明与获取......

from launch.actions import DeclareLaunchArgument

# from launch.substitutions import LaunchConfiguration

# # 文件包含相关......

# from launch.actions import IncludeLaunchDescription

# from launch.launch_description_sources import PythonLaunchDescriptionSource

# # 分组相关......

# from launch_ros.actions import PushRosNamespace

# from launch.actions import GroupAction

# # 事件相关......

# from launch.event_handlers import OnProcessStart, OnProcessExit

# from launch.actions import RegisterEventHandler

# from launch.actions import LogInfo

# # 获取功能包下share目录路径......

from ament_index_python.packages import get_package_share_directory

from launch_ros.parameter_descriptions import ParameterValue

from launch.substitutions import Command, LaunchConfiguration

import os

from launch.conditions import IfCondition

  
  

def generate_launch_description():

# 获取功能包路径

go2_description_pkg = get_package_share_directory("go2_description")

use_joint_state_publisher = DeclareLaunchArgument(

name = "use_joint_state_publisher",

default_value="true"

)

model = DeclareLaunchArgument(

name = "urdf_path",

default_value = os.path.join(go2_description_pkg,"urdf","go2_description.urdf")

)

# 使用xacro读取urdf文件内容

# robot_desc = ParameterValue(Command(["xacro ",os.path.join(go2_description_pkg,"urdf","go2_description.urdf")]))

robot_desc = ParameterValue(Command(["xacro ",LaunchConfiguration("urdf_path")]))

# robot_state_publisher === 加载机器人 urdf 文件

robot_state_publisher = Node(

package="robot_state_publisher",

executable="robot_state_publisher",

parameters=[{"robot_description":robot_desc}]

)

# joint_state_publisher === 发布关节状态

# 后续编写程序动态获取关节信息并发布

# 所以这个节点的启动是有条件的

joint_state_publisher = Node(

package="joint_state_publisher",

executable="joint_state_publisher",

condition=IfCondition(LaunchConfiguration("use_joint_state_publisher"))

)

return LaunchDescription([

model,

use_joint_state_publisher,

robot_state_publisher,

joint_state_publisher

  

])
```


6. 执行
构建 (回 unitree_go2_ws 下)：
```
colcon build --packages-select go2_description

ros2 launch go2_description display.launch.py
```
可视化 (回 unitree_go2_ws 下)：
```
. install/setup.bash #(必须刷新环境变量)
rviz2
```
Fixde Frame --> base
Add --> RobotModel
Description Topic --> robot_description


7. 显示雷达
TF 坐标变换
该urdf使用的雷达坐标系叫‘radar’
而PointCloud2使用的坐标系叫 utliidar_lidar
终端查看消息：ros2 topic echo /utlidar/cloud --no-arr

ros2 run tf2_ros static_transform_publisher -h #查看使用语法

终端一：
ros2 run tf2_ros static_transform_publisher --frame-id radar --child-frame-id utlidar_lidar #坐标无偏移映射
终端二：
. install/setup.bash 
rviz2
终端三：
colcon build --packages-select go2_description
ros2 launch go2_description display.launch.py
或 `ros2 launch go2_description display.launch.py use_joint_state_publisher:=false``